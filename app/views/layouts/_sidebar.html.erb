<div class="row">
  <div class="row">
    <div class="page-header">
      <h4>
        <i class="fas fa-star"></i>
        「行きたい！」ランキング
      </h4>
    </div>
  </div>
  <div class="row">
    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <th class="text-center">
            順位
          </th>
          <th class="text-center">
            観光スポット
          </th>
          <th class="text-center">
            行きたい！
          </th>
        </tr>
      </thead>
      <tbody>
        <% tourist_spots_fav.each.with_index(1) do |tourist_spot, index| %>
          <tr>
            <td class="text-center">
              <% case index when 1 %>
                <i class="fas fa-crown" style='color: gold;'></i>
              <% when 2 %>
                <i class="fas fa-crown" style='color: silver;'></i>
              <% when 3 %>
                <i class="fas fa-crown" style='color: #B08A1C;'></i>
              <% else %>
                <%=  index %>
              <% end %>
            </td>
            <td>
              <%= link_to tourist_spot_path(tourist_spot) do %>
                <%= attachment_image_tag tourist_spot, :spot_image, fallback: 'others/no_image.jpg', size: '50x50', class: 'img-thumbnail img-rounded img-responsive img-hover' %>
                <span class="margin-left--10px">
                  <%= tourist_spot.name %>
                </span>
              <% end %>
            </td>
            <td class="text-center">
              <%= tourist_spot.favorites.count %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  
  <div class="row">
    <div class="page-header">
      <h4>
        <i class="fas fa-eye"></i>
        PVランキング
      </h4>
    </div>
  </div>
  <div class="row">
    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <th class="text-center">
            順位
          </th>
          <th class="text-center">
            観光スポット
          </th>
          <th class="text-center">
            PV
          </th>
        </tr>
      </thead>
      <tbody>
        <% tourist_spots_pv.each.with_index(1) do |tourist_spot, index| %>
          <tr>
            <td class="text-center">
              <% case index when 1 %>
                <i class="fas fa-crown" style='color: gold;'></i>
              <% when 2 %>
                <i class="fas fa-crown" style='color: silver;'></i>
              <% when 3 %>
                <i class="fas fa-crown" style='color: #B08A1C;'></i>
              <% else %>
                <%=  index %>
              <% end %>
            </td>
            <td>
              <%= link_to tourist_spot_path(tourist_spot) do %>
                <%= attachment_image_tag tourist_spot, :spot_image, fallback: 'others/no_image.jpg', size: '50x50', class: 'img-thumbnail img-rounded img-responsive img-hover' %>
                <span class="margin-left--10px">
                  <%= tourist_spot.name %>
                </span>
              <% end %>
            </td>
            <td class="text-center">
              <%= tourist_spot.impressions_count %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div class="row">
    <div class="page-header">
      <h4>
        <i class="fas fa-eye"></i>
        タグランキング
      </h4>
    </div>
  </div>
  <div class="row">
    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <th class="text-center">
            順位
          </th>
          <th class="text-center">
            タグ
          </th>
          <th class="text-center">
            投稿数
          </th>
        </tr>
      </thead>
      <tbody>
        <% tags.each.with_index(1) do |tag, index| %>
          <tr>
            <td class="text-center">
              <% case index when 1 %>
                <i class="fas fa-crown" style='color: gold;'></i>
              <% when 2 %>
                <i class="fas fa-crown" style='color: silver;'></i>
              <% when 3 %>
                <i class="fas fa-crown" style='color: #B08A1C;'></i>
              <% else %>
                <%=  index %>
              <% end %>
            </td>
            <td class="text-center">
              <%= link_to tag, tourist_spot_tag_search_path(tag_name: tag.name) %>
            </td>
            <td class="text-center">
              <%= tag.taggings_count %>
            </td> 
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div class="row">
    <div class="page-header">
      <h4>
        <i class="fas fa-edit"></i>
        レビューランキング
      </h4>
    </div>
  </div>
  <div class="row">
    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <th class="text-center">
            順位
          </th>
          <th class="text-center">
            レビュー
          </th>
          <th class="text-center">
            観光地
          </th>
          <th class="text-center">
            投稿者
          </th>
        </tr>
      </thead>
      <tbody>
        <% reviews.each.with_index(1) do |review, index| %>
          <tr>
            <td class="text-center">
              <% case index when 1 %>
                <i class="fas fa-crown" style='color: gold;'></i>
              <% when 2 %>
                <i class="fas fa-crown" style='color: silver;'></i>
              <% when 3 %>
                <i class="fas fa-crown" style='color: #B08A1C;'></i>
              <% else %>
                <%=  index %>
              <% end %>
            </td>
            <td class="text-center">
              <%= attachment_image_tag review, :review_image, size: '50x50', class: 'img-thumbnail img-rounded img-responsive img-hover' %>
              <br>
              <span>
                <%= review.title %>
              </span>
              <div class="text-muted">
                <%= truncate review.body, length: 20 %>
              </div>
            </td>
            <td class="text-center">
              <%= link_to tourist_spot_path(review.tourist_spot) do %>
                <%= review.tourist_spot.name %>
              <% end %>
            </td>
            <td class="text-center">
              <%= link_to user_path(review.user) do %>
                <%= review.user.name %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  
  <div class="row">
    <div class="page-header">
      <h4>
        <i class="fas fa-users"></i>
        ユーザーランキング
      </h4>
    </div>
  </div>
  
  <div class="row">
    <%= form_with url: user_keyword_search_path, method: :get, local: true do %>
      <div class="col-md-8">
        <%= text_field_tag :search, '', placeholder: 'ユーザーキーワード検索', class: 'form-control' %>
      </div>
      <div class="col-md-4">
        <%= button_tag type: 'submit', name: nil, class: 'btn btn-info btn-block' do %>
          <i class="fas fa-search"></i>
          検索
        <% end %>
        <br>
      </div>
    <% end %>
  </div>

  <div class="row">
    <table class="table table-bordered table-hover">
      <thead>
        <tr>
          <th class="text-center">
            順位
          </th>
          <th class="text-center">
            会員
          </th>
          <th class="text-center">
            ポイント数
          </th>
        </tr>
      </thead>
      <tbody>
        <% users.each.with_index(1) do |user, index| %>
          <tr>
            <td class="text-center">
              <% case index when 1 %>
                <i class="fas fa-crown" style='color: gold;'></i>
              <% when 2 %>
                <i class="fas fa-crown" style='color: silver;'></i>
              <% when 3 %>
                <i class="fas fa-crown" style='color: #B08A1C;'></i>
              <% else %>
                <%=  index %>
              <% end %>
            </td>
            <td class="text-center">
              <%= link_to user_path(user) do %>
                <%= attachment_image_tag user, :profile_image, fallback: 'others/no_image.jpg', size: '50x50', class: 'img-thumbnail img-responsive img-hover' %>
              <% end %>
              <br>
              <span class="margin-left--10px">
                <%= user.name %>
              </span>
            </td>
            <td>
              <div class="text-center">
                <%= user.point %>
              </div>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
